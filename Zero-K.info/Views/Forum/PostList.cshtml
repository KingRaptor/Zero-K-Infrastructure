@using ZeroKWeb
@using ZeroKWeb.Controllers
@using ZkData
@model ZeroKWeb.Controllers.ForumController.PostListModel
@{
    var grid = new UniGrid<ForumPost>(Model.Data) { PageSize = GlobalConst.ForumPostsPerPage };
    grid.AddCol("sort", x => Html.DisplayFor(m => x)).SetSort(x =>x.ForumPostID).SetWidth("100%");
    if (Model.GoToPost != 0)
    {
        grid.PageNumber = 1 + ForumController.GetPostPage(Model.Thread.ForumPosts.First(x => x.ForumPostID == Model.GoToPost));
    }
}
<div id="gposts">
    @using (Ajax.BeginForm("GetPostList", "Forum", new { threadID = Model.ThreadID }, Global.GetAjaxOptions("gposts")))
    {
        <span>
            Filter: @Html.TextBoxFor(x => x.Search)<input type="submit" value="Search"/>
        </span>
        @GridHelpers.RenderTable(Html, grid,"");
    }

    @if (Model.GoToPost > 0)
    {
        <script language="javascript" type="text/javascript">
        $(document).ready(function () {
            document.getElementById("post@(Model.GoToPost)").scrollIntoView();
        });
        </script>
    }
</div>

