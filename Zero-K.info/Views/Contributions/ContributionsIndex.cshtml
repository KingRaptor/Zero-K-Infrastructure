@using PlasmaShared
@using ZeroKWeb
@using ZkData
@model dynamic
<h1>Contribute to Zero-K and Spring project</h1>

<form action="https://www.paypal.com/cgi-bin/webscr" method="post">

    <input type="hidden" name="business" value="S7LYLK6P63H48">

    <!-- Specify a Donate button. -->
    <input type="hidden" name="cmd" value="_donations">

    <!-- Specify details about the contribution -->
    <input type="hidden" name="item_name" value="Zero-K">
    <input type="hidden" name="item_number" value="@PayPalInterface.GetItemCode(Global.AccountID, null)">
    <input type="hidden" name="currency_code" value="EUR">
    <input type="hidden" name="notify_url" value="@Url.Action("Ipn")">
    <input type="hidden" name="no_note" value="0"/>
    <input type="hidden" name="cn" value="Send message to the team"/>
    <input type="hidden" name="no_shipping" value="1"/>
    <input type="hidden" name="rm" value="1"/>
    <input type="hidden" name="return" value="@Url.Action("ThankYou")">
    
    <!-- Display the payment button. -->
    <input type="image" name="submit" border="0"
           src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif"
           alt="PayPal - The safer, easier way to pay online">
    <img alt="" border="0" width="1" height="1"
         src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif">
</form>


<h2>Many thanks to those great people!</h2>
<table>

    @foreach (var c in new ZkDataContext().Contributions.OrderByDescending(x => x.Time)) {
        <tr>
            <td>
                @if (c.AccountByAccountID != null) {
                    @Html.PrintAccount(c.AccountByAccountID)
                }
                else {
                    <span>@c.Name</span>
                }

            </td>
            <td>€@c.Euros.Value.ToString("F2")</td>
        </tr>
    }
</table>